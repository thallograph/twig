{"version":3,"file":"rcRef.js","names":["Context","_interopRequireWildcard","require","Duration","Effectable","_Function","Readable","coreEffect","core","circular","fiberRuntime","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","TypeId","exports","Symbol","for","stateEmpty","_tag","stateClosed","variance","_A","identity","_E","RcRefImpl","Class","acquire","context","scope","idleTimeToLive","state","semaphore","unsafeMakeSemaphore","constructor","commit","make","options","withFiberRuntime","fiber","getFiberRef","currentContext","scopeTag","ref","decode","undefined","as","addFinalizer","withPermits","suspend","close","scopeClose","exitVoid","void","self_","self","isInfinite","isFinite","uninterruptibleMask","restore","interrupt","refCount","interruptFiber","succeed","scopeMake","pipe","bindTo","bind","fiberRefLocally","add","map","value","tap","sleep","interruptible","zipRight","ensuring","sync","forkIn","invalidate","uninterruptible"],"sources":["../../../src/internal/rcRef.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}