{"version":3,"file":"Redis.js","names":["Config","Duration","Effect","Layer","Redis","RateLimiter","make","fnUntraced","options","prefix","redis","acquireRelease","sync","promise","quit","defineCommand","lua","numberOfKeys","readOnly","RateLimiterStore","of","fixedWindow","key","refillMillis","toMillis","refillRate","tryPromise","try","tokens","limit","catch","cause","RateLimitStoreError","message","tokenBucket","clockWith","clock","unsafeCurrentTimeMillis","allowOverflow","layerStore","scoped","layerStoreConfig","flatMap","unwrap"],"sources":["../../../src/RateLimiter/Redis.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}