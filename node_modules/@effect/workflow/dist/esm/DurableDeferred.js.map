{"version":3,"file":"DurableDeferred.js","names":["Context","Effect","Encoding","Exit","dual","Predicate","Schema","Workflow","TypeId","Symbol","for","make","name","options","successSchema","success","Void","errorSchema","error","Never","exitSchema","ExitFromSelf","failure","defect","Defect","withActivityAttempt","gen","attempt","CurrentAttempt","EngineTag","GenericTag","InstanceTag","Reference","defaultValue","await_","fnUntraced","self","engine","instance","exit","wrapActivityResult","deferredResult","isUndefined","undefined","suspend","await","into","effect","contextWithEffect","context","get","onExit","suspended","void","deferredDone","workflowName","workflow","executionId","deferredName","raceAll","deferred","flatten","effects","TokenTypeId","Token","String","pipe","brand","TokenParsed","Class","asToken","encodeBase64Url","JSON","stringify","FromString","StringFromBase64Url","compose","parseJson","Tuple","transform","decode","encode","parsed","fromString","decodeSync","encodeSync","token","tokenFromExecutionId","tokenFromPayload","map","payload","done","succeed","value","fail","failCause","cause"],"sources":["../../src/DurableDeferred.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}