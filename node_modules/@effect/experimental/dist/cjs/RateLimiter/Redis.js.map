{"version":3,"file":"Redis.js","names":["Config","_interopRequireWildcard","require","Duration","Effect","Layer","_ioredis","RateLimiter","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","make","exports","fnUntraced","options","prefix","redis","acquireRelease","sync","Redis","promise","quit","defineCommand","lua","numberOfKeys","readOnly","RateLimiterStore","of","fixedWindow","key","refillMillis","toMillis","refillRate","tryPromise","try","tokens","limit","catch","cause","RateLimitStoreError","message","tokenBucket","clockWith","clock","unsafeCurrentTimeMillis","allowOverflow","layerStore","scoped","layerStoreConfig","flatMap","unwrap"],"sources":["../../../src/RateLimiter/Redis.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}