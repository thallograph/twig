{"version":3,"file":"DurableQueue.js","names":["PersistedQueue","_interopRequireWildcard","require","Context","Effect","Layer","Schedule","Schema","Activity","DurableDeferred","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","TypeId","exports","make","options","name","payloadSchema","isSchema","payload","Struct","idempotencyKey","deferred","success","error","queueSchemas","getQueueSchema","schema","token","String","traceId","spanId","sampled","Boolean","process","fnUntraced","self","queueName","queue","id","successSchema","errorSchema","useSpan","captureStackTrace","attributes","span","offer","pipe","tapErrorCause","logWarning","catchTag","die","retry","retrySchedule","defaultRetrySchedule","orDie","annotateLogs","package","module","fiber","await","exponential","union","spaced","makeWorker","concurrency","worker","take","item_","item","exit","flatMap","done","asVoid","withSpan","parent","_tag","context","empty","catchAllCause","forever","replicateEffect","discard","never","scopedDiscard","forkScoped"],"sources":["../../src/DurableQueue.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}