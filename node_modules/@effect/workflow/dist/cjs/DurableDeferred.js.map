{"version":3,"file":"DurableDeferred.js","names":["Context","_interopRequireWildcard","require","Effect","Encoding","Exit","_Function","Predicate","Schema","Workflow","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","TypeId","exports","Symbol","for","make","name","options","successSchema","success","Void","errorSchema","error","Never","exitSchema","ExitFromSelf","failure","defect","Defect","withActivityAttempt","gen","attempt","CurrentAttempt","EngineTag","GenericTag","InstanceTag","Reference","defaultValue","await_","await","fnUntraced","self","engine","instance","exit","wrapActivityResult","deferredResult","isUndefined","undefined","suspend","into","dual","effect","contextWithEffect","context","onExit","suspended","void","deferredDone","workflowName","workflow","executionId","deferredName","raceAll","deferred","flatten","effects","TokenTypeId","Token","String","pipe","brand","TokenParsed","Class","asToken","encodeBase64Url","JSON","stringify","FromString","StringFromBase64Url","compose","parseJson","Tuple","transform","decode","encode","parsed","fromString","decodeSync","encodeSync","token","tokenFromExecutionId","tokenFromPayload","map","payload","done","succeed","value","fail","failCause","cause"],"sources":["../../src/DurableDeferred.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}